# texas-holdem
Enterprise training of JiangSu Normal University KeWen College Grade 20 Big Data.

# 德州扑克
德州扑克不使用鬼牌，只使用52张扑克牌，是一种不换牌扑克游戏。

> **牌局进行流程**
第一轮前先决定座位及起始发牌位置。
1、洗牌并切牌。
2、本次轮到担任盲注的牌手下盲注。
3、为每位牌手发两张底牌。
4、翻牌前（preflop）喊注。
5、消一张牌后发出三张公共牌。
6、翻牌圈（flop）喊注。
7、消一张牌后发出一张公共牌（转牌）。
8、转牌圈（turn）喊注。
9、消一张牌后发出一张公共牌（河牌）。
10、河牌圈（river）喊注。
11、若有两家或以上未盖牌则斗牌比大小，依胜负分配总彩金。
12、结束本回合，庄家位置依顺时钟次序移动至下一家进行下一轮。

 **牌型大小规则**

 - 牌型大小依序为：同花大顺 > 同花顺 > 四条 > 葫芦 > 同花 > 顺子 > 三条 > 两对 > 一对 > 散牌
 - 同花大顺/皇家同花顺：同花色的A，K，Q，J和10
 - 同花顺：五张同花色的连续数字牌
 - 四条：其中四张是相同数字的扑克牌，第五张是剩下牌组中最大的一张牌
 - 满堂红：由三张相同数字及任何两张其他相同数字的扑克牌组成
 - 同花：同一花色的任意五张牌
 - 顺子：由五张连续数字扑克牌组成
 - 三条：由三张相同数字和两张不同数字的扑克牌组成
 - 两对：两对数字相同但两两不同的扑克和一张杂牌组成
 - 一对：由两张相同数字的扑克牌和另三张无法组成牌型的杂牌组成
 - 散牌：无法组成以上任一牌型的杂牌
# 概要需求分析
 1. 首先，要模拟出一副不含鬼牌扑克牌并进行洗牌
 2. 接着我们要为玩家分发扑克牌
 3. 最后我们要判断玩家手中的牌的类型

# 编码实现
## 模拟扑克牌（文件：card.py）
> **需求分析：**
	我们需要模拟出52张扑克牌，涵盖了四种花色、13个数字，其中A、J、Q、K四个数字比较特殊，我们需要对其进行特殊处理。
	因此，该类需要有两个成员属性——花色和数字（即color和value）并对其进行封装（@property、@color.setter、@value.setter）
	在实例化Card对象时，数字为1-13，其中1为A，11、12、13分别为J、Q、K，为了将扑克牌更直观的展现给用户，我们可以通过复写__str__方法来实现这种效果。在__str__方法内，我们将1、11、12、13分别转换为A、J、Q、K进行输出。

## 模拟发牌（文件：poke.py）
> **需求分析：**
> 在发牌前我们需要有一副扑克牌，所以我们需要提供生成一副扑克牌的方法，而最好的实现方式就是在实例化时就已经生成了一副，所以我们可以将生成一副扑克牌的方法写在构造函数里。
> 显然，在发牌前我们必须保证这副扑克牌不是按照顺序摆放的，我们需要保证他是乱序的，我们可以通过random模块中的shuffle方法来进行乱序排序。
> 我们知道，德州扑克每个玩家的手牌是五张，所以我们只要抽取五张牌给玩家即可，可以通过切片的方式将扑克牌列表分割。通过字典的方式绑定玩家与其手牌，手牌使用列表，在发完牌后将此字典返回。

## 判断类型（文件：play.py）
> **需求分析：**
> 由于玩家人数不确定，所以需要进行排错处理，德州扑克的玩家数是2-9，所以当用户输入错误玩家数时，会给予提示，无法开始游戏。
> 判断玩家手牌类型是一个比较难的地方。根据惯性思维，只要这个玩家满足了高等级的牌型，就不许用再去判断他是否满足低等级的牌型了，因此我们直接从最大的牌型来判断，并依次降低，即判断的顺序为同花大顺 > 同花顺 > 四条 > 葫芦 > 同花 > 顺子 > 三条 > 两对 > 一对 > 散牌。
> **皇家同花顺：** 首先必须是同色花，即花色的种类只有一种；其数值类型只有一种选择（1、10、11、12、13），因此我们可以直接使用暴力比较，将列表[1, 10, 11, 12, 13]与排序后的values进行比较。
> **同花顺：** 首先判断同色花；然后判断是否是连续的五张牌，五张连续的牌必然是五种类型，并且极差是4
> **四条：** 首先，具有两种类型的数值；其次数值数量多的牌的个数与数值数量少的牌的个数相差3；并且要求单独的那一张牌是最大的。分析后两个需求，即小的数的个数要比大的数的个数多3个，因此我们可以获取小的数的个数和大的数的个数来进行做差。【那么事实上，在第二种思路下我们就没有必要去考虑数值种类了，因为相差是，相加是5，只能有一种结果，就是4-1，即只会有两种类型的数值。也就是我们将valuesLen == 2条件删掉也不会影响结果】
> **满堂红：** 首先，有两种类型的数值；其次，一种数值有三个，另一种数值有两个，即较多数值类型的个数与较少数值类型的个数之差是1。【这个时候必须要判断数值类型种类数，因为3-2等于1，2-1也等于1，例2、2、5、5、6】
> **同花：** 很简单，只有一种花色即可
> **顺子：** 不需要考虑花色。五种数值类型、极差为4
> **三条：** 首先，三种数值类型；其次较多数值类型的个数与较少数值类型的个数之差是2。
> **两对：** 首先，三种数值类型；其次较多数值类型的个数与较少数值类型的个数之差是1。
> **一对：** 首先，四种数值类型；其次较多数值类型的个数与较少数值类型的个数之差是1。
> **散牌：** 除以上内容即是散牌。

## 开始游戏（文件：game.py）
>**需求分析：** 开始游戏的程序千变万化，不做分析
> **代码分析：** 玩家人数需要用户输入，因此加入了排错的代码；选择2和选择4需要用户输入，加入排错代码，此处排错直接使用异常处理，当在字典中查询不到数据时，会报出异常，直接在此处进行捕获处理即可；选择6直接结束本循环即可；选择7除了需要结束本循环以外，还要将外循环的flag修改为False

-----
> 致读者：打牌不在笔者的爱好之内且不善python，游戏规则有误或需补充、代码如有不当之处，请及时指出，笔者感激不尽。
